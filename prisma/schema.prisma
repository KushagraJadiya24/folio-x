generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TradeType {
  BUY
  SELL
}

model User {
  id         String     @id @default(cuid())
  clerkId    String     @unique
  email      String     @unique
  firstName  String?
  lastName   String?
  portfolios Portfolio[]
  createdAt  DateTime   @default(now())
}

model Portfolio {
  id        String  @id @default(cuid())
  ownerId   String
  owner     User    @relation(fields: [ownerId], references: [id])
  balance   Float   @default(100000) // starting paper money
  trades    Trade[]
  createdAt DateTime @default(now())
}

model Stock {
  id           String  @id @default(cuid())
  symbol       String  @unique
  name         String?
  lastPrice    Float?
  trades       Trade[]
  updatedAt    DateTime @updatedAt
}

model Trade {
  id          String    @id @default(cuid())
  portfolioId String
  portfolio   Portfolio @relation(fields: [portfolioId], references: [id])
  stockId     String
  stock       Stock     @relation(fields: [stockId], references: [id])
  type        TradeType
  price       Float
  quantity    Int
  executedAt  DateTime  @default(now())
}
